# Use official Ubuntu image as a base
FROM ubuntu:20.04

# Install necessary dependencies for Node.js and Postman
RUN apt-get update && apt-get install -y \
    curl \
    gnupg \
    lsb-release \
    && curl -sL https://deb.nodesource.com/setup_14.x | bash - \
    && apt-get install -y nodejs \
    && apt-get install -y wget unzip

# Install Postman (if required for your setup)
RUN wget https://dl.pstmn.io/download/latest/linux64 -O postman.tar.gz \
    && tar -xvzf postman.tar.gz -C /opt \
    && rm postman.tar.gz

# Set the working directory
WORKDIR /PostmanApiTesting

# Copy package.json and install dependencies
COPY package*.json ./
RUN npm install

# Copy the Postman collection folder
COPY testPostmanCollection ./testPostmanCollection

# Expose port 3000 (if your application needs to run on this port)
EXPOSE 3000

# Optionally, you can define entry point to run Postman collection using newman (Postman CLI)
# RUN npm install -g newman

# CMD ["newman", "run", "./testPostmanCollection/your_collection.json"]  # Use if you want to run Postman collection automatically

# Start the application (use if you have an app to start, otherwise remove this line)
CMD ["npm", "start"]

